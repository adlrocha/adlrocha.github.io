<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Til on @adlrocha</title>
    <link>/tags/til/</link>
    <description>Recent content in Til on @adlrocha</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 23 Jan 2025 00:00:00 +0000</lastBuildDate>
    <atom:link href="/tags/til/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Fix ERR_NETWORK_CHANGED</title>
      <link>/til/2025-09-01-err-net-changed/</link>
      <pubDate>Thu, 23 Jan 2025 00:00:00 +0000</pubDate>
      <guid>/til/2025-09-01-err-net-changed/</guid>
      <description>&lt;h1 id=&#34;fix-err_network_changed&#34;&gt;Fix &lt;code&gt;ERR_NETWORK_CHANGED&lt;/code&gt;&lt;/h1&gt;&#xA;&lt;p&gt;This was a pretty annoying issue that I had been facing for months and that it was harming my daily&#xA;productivity to a point that I was considering completely formatting my computer and starting from&#xA;scratch. The issue was the following:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Every time that I was using an Electron application or I opened a website in my browser that used&#xA;websocket or a persistent communication to a server led to intermitently getting a&#xA;&lt;code&gt;ERR_NETWORK_CHANGED&lt;/code&gt; error. This triggered a restart in the application or website connection.&#xA;For certain applications this was fine, but whenever I was interacting with an LLM or leveraging a&#xA;coding agent with a persistent connection, getting an &lt;code&gt;ERR_NETWORK_CHANGED&lt;/code&gt; error was a major&#xA;setback as it required restarting all the work that it was doing.&lt;/li&gt;&#xA;&lt;li&gt;I tried everything to debug the problem:&#xA;&lt;ul&gt;&#xA;&lt;li&gt;I first checked if this could be related with the power saving mode for the Wifi card of my&#xA;Framework laptop, but it was still happening when connected through Ethernet.&lt;/li&gt;&#xA;&lt;li&gt;I disabled my VPNs and reviewed all my firewalls and network policies&amp;hellip; still nothing!&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;I decided then to directly run &lt;code&gt;sudo journalctl -f -u NetworkManager&lt;/code&gt; to see if I could catch one&#xA;of these events and figure out what was causing the error. And voil√°, I found the culprit! The&#xA;error was being triggered by the network manager triggering an event every time a new virtual&#xA;interface was being created. This event was being propagated and picked up by browsers and&#xA;electron applications that were picking up this event as a network change that required a&#xA;reconnection.&lt;/li&gt;&#xA;&lt;li&gt;I had to know figure out who and why was this virtual interface was being created every minute. I&#xA;inspected my &lt;code&gt;docker events&lt;/code&gt; and the reason was obvious immediately. I was running a few&#xA;containers (mainly Redis) that was running a healthchecks every minute. In order to perform this&#xA;healthcheck, Docker was creating an ephimeral virtual interface that was created and immediately&#xA;destroyed. This is the network event involving my network interfaces that was being picked up by&#xA;the network manager and propagated up.&lt;/li&gt;&#xA;&lt;li&gt;The issue was simple, I disabled all healthcheck on my containers and it solved the problem. It&#xA;may seem obvious now, but it was a pretty hard one to debug.&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;I also tried to blacklist virtual interfaces in the network manager so the changes triggered by&#xA;healthcheck virtual interfaces are not propagated up, but this ended up not working reliably. It may&#xA;be worth exploring this approach further as it seems cleaner (and more nuclear) but the time I&#xA;time-boxed for this debugging was up and I had to move to something else. I guess this is good&#xA;enough for now, I&amp;rsquo;ll keep you posted if this issue (or something related) ends up surfacing in the&#xA;world again, or if I end up finding the time to debug and find a better fix for it.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
